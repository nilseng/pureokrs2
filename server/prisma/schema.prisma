generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Company {
  id        Int         @default(autoincrement()) @id
  name      String
  KeyResult KeyResult[]
  Okr       Okr[]
  User      User[]
}

model KeyResult {
  companyId   Int
  createdAt   DateTime  @default(now())
  dueDate     DateTime?
  id          Int       @default(autoincrement()) @id
  name        String
  okrId       Int
  type        String    @default("Number")
  updatedAt   DateTime  @default(now())
  updatedById Int
  value       Float?    @default(0)
  Company     Company   @relation(fields: [companyId], references: [id])
  Okr         Okr       @relation(fields: [okrId], references: [id])
  User        User      @relation(fields: [updatedById], references: [id])
}

model Okr {
  assignedToId                Int?
  companyId                   Int
  createdAt                   DateTime    @default(now())
  dueDate                     DateTime?
  id                          Int         @default(autoincrement()) @id
  objective                   String
  parentId                    Int?
  status                      String      @default("Active")
  updatedAt                   DateTime    @default(now())
  updatedById                 Int?
  User_Okr_assignedToIdToUser User?       @relation("Okr_assignedToIdToUser", fields: [assignedToId], references: [id])
  Company                     Company     @relation(fields: [companyId], references: [id])
  Okr                         Okr?        @relation("OkrToOkr_parentId", fields: [parentId], references: [id])
  User_Okr_updatedByIdToUser  User?       @relation("Okr_updatedByIdToUser", fields: [updatedById], references: [id])
  KeyResult                   KeyResult[]
  other_Okr                   Okr[]       @relation("OkrToOkr_parentId")
}

model User {
  companyId                  Int
  email                      String      @unique
  id                         Int         @default(autoincrement()) @id
  name                       String?
  Company                    Company     @relation(fields: [companyId], references: [id])
  KeyResult                  KeyResult[]
  Okr_Okr_assignedToIdToUser Okr[]       @relation("Okr_assignedToIdToUser")
  Okr_Okr_updatedByIdToUser  Okr[]       @relation("Okr_updatedByIdToUser")
}